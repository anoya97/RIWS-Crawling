{"ast":null,"code":"var _jsxFileName = \"/home/raul/Escritorio/RIWS/RIWS-Crawling/Dineology/dineology-search/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport SearchForm from './components/SearchForm';\nimport Filters from './components/Filters';\nimport ResultsGrid from './components/ResultsGrid';\nimport { fetchResults } from './services/restaurantService';\nimport { formatMealType, processMealTypes } from './utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [filteredResults, setFilteredResults] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [filters, setFilters] = useState({\n    starsOrSoles: 'both',\n    priceRange: '',\n    mealType: '',\n    starNumber: ''\n  });\n  const [filterOptions, setFilterOptions] = useState({\n    priceRanges: [],\n    mealTypes: []\n  });\n  const [showFilters, setShowFilters] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const handleSearch = async searchQuery => {\n    const {\n      processedHits,\n      filterOptions\n    } = await fetchResults(searchQuery);\n    setResults(processedHits);\n    setFilteredResults(processedHits);\n    setNotFound(processedHits.length === 0);\n    setFilterOptions(filterOptions);\n  };\n  useEffect(() => {\n    if (location.state && location.state.query) {\n      setQuery(location.state.query);\n      handleSearch(location.state.query);\n    }\n  }, [location.state]);\n  const handleResultClick = restaurant => {\n    const restaurantName = restaurant._source.name.replace(/\\s+/g, '-').toLowerCase();\n    navigate(`/${restaurantName}`, {\n      state: {\n        query,\n        restaurant: restaurant._source\n      }\n    });\n  };\n  const applyFilters = () => {\n    let filtered = results;\n    if (filters.starsOrSoles === 'estrellas') {\n      filtered = filtered.filter(result => result._source.star_number > 0);\n    } else if (filters.starsOrSoles === 'soles') {\n      filtered = filtered.filter(result => result._source.soles_number > 0);\n    }\n    if (filters.priceRange) {\n      filtered = filtered.filter(result => result._source.price === filters.priceRange);\n    }\n    if (filters.mealType) {\n      filtered = filtered.filter(result => {\n        const restaurantMealTypes = processMealTypes(result._source.meal_type);\n        return restaurantMealTypes.includes(filters.mealType);\n      });\n    }\n    if (filters.starNumber) {\n      const starNum = parseInt(filters.starNumber);\n      filtered = filtered.filter(result => {\n        const stars = result._source.star_number || 0;\n        const soles = result._source.soles_number || 0;\n        return stars === starNum && soles === 0 || soles === starNum && stars === 0 || stars === starNum && soles === starNum;\n      });\n    }\n    setFilteredResults(filtered);\n  };\n  const clearFilters = () => {\n    setFilters({\n      starsOrSoles: 'both',\n      priceRange: '',\n      mealType: '',\n      starNumber: ''\n    });\n    setFilteredResults(results);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(SearchForm, {\n      query: query,\n      setQuery: setQuery,\n      onSearch: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), showFilters && /*#__PURE__*/_jsxDEV(Filters, {\n      filters: filters,\n      filterOptions: filterOptions,\n      setFilters: setFilters,\n      onApplyFilters: applyFilters,\n      onClearFilters: clearFilters\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), notFound && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"notFound\",\n      children: [\"No se encontraron resultados para \\\"\", query, \"\\\".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(ResultsGrid, {\n      results: filteredResults,\n      onResultClick: handleResultClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"KJQfEHcx3m3e4KcMwso8TzOgjSo=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useLocation","SearchForm","Filters","ResultsGrid","fetchResults","formatMealType","processMealTypes","jsxDEV","_jsxDEV","App","_s","query","setQuery","results","setResults","filteredResults","setFilteredResults","notFound","setNotFound","filters","setFilters","starsOrSoles","priceRange","mealType","starNumber","filterOptions","setFilterOptions","priceRanges","mealTypes","showFilters","setShowFilters","navigate","location","handleSearch","searchQuery","processedHits","length","state","handleResultClick","restaurant","restaurantName","_source","name","replace","toLowerCase","applyFilters","filtered","filter","result","star_number","soles_number","price","restaurantMealTypes","meal_type","includes","starNum","parseInt","stars","soles","clearFilters","className","children","onSearch","fileName","_jsxFileName","lineNumber","columnNumber","onApplyFilters","onClearFilters","onResultClick","_c","$RefreshReg$"],"sources":["/home/raul/Escritorio/RIWS/RIWS-Crawling/Dineology/dineology-search/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport SearchForm from './components/SearchForm';\nimport Filters from './components/Filters';\nimport ResultsGrid from './components/ResultsGrid';\nimport { fetchResults } from './services/restaurantService';\nimport { formatMealType, processMealTypes } from './utils';\n\nfunction App() {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [filteredResults, setFilteredResults] = useState([]);\n  const [notFound, setNotFound] = useState(false);\n  const [filters, setFilters] = useState({\n    starsOrSoles: 'both',\n    priceRange: '',\n    mealType: '',\n    starNumber: '',\n  });\n  const [filterOptions, setFilterOptions] = useState({\n    priceRanges: [],\n    mealTypes: []\n  });\n  const [showFilters, setShowFilters] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const handleSearch = async (searchQuery) => {\n    const { processedHits, filterOptions } = await fetchResults(searchQuery);\n    setResults(processedHits);\n    setFilteredResults(processedHits);\n    setNotFound(processedHits.length === 0);\n    setFilterOptions(filterOptions);\n  };\n\n  useEffect(() => {\n    if (location.state && location.state.query) {\n      setQuery(location.state.query);\n      handleSearch(location.state.query);\n    }\n  }, [location.state]);\n\n  const handleResultClick = (restaurant) => {\n    const restaurantName = restaurant._source.name.replace(/\\s+/g, '-').toLowerCase();\n    navigate(`/${restaurantName}`, { state: { query, restaurant: restaurant._source } });\n  };\n\n  const applyFilters = () => {\n    let filtered = results;\n    if (filters.starsOrSoles === 'estrellas') {\n      filtered = filtered.filter((result) => (result._source.star_number > 0));\n    } else if (filters.starsOrSoles === 'soles') {\n      filtered = filtered.filter((result) => (result._source.soles_number > 0));\n    }\n    if (filters.priceRange) {\n      filtered = filtered.filter((result) => result._source.price === filters.priceRange);\n    }\n    if (filters.mealType) {\n      filtered = filtered.filter((result) => {\n        const restaurantMealTypes = processMealTypes(result._source.meal_type);\n        return restaurantMealTypes.includes(filters.mealType);\n      });\n    }\n    if (filters.starNumber) {\n      const starNum = parseInt(filters.starNumber);\n      filtered = filtered.filter((result) => {\n        const stars = result._source.star_number || 0;\n        const soles = result._source.soles_number || 0;\n        return (\n          (stars === starNum && soles === 0) ||\n          (soles === starNum && stars === 0) ||\n          (stars === starNum && soles === starNum)\n        );\n      });\n    }\n    setFilteredResults(filtered);\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      starsOrSoles: 'both',\n      priceRange: '',\n      mealType: '',\n      starNumber: '',\n    });\n    setFilteredResults(results);\n  };\n\n  return (\n    <div className=\"App\">\n      <SearchForm query={query} setQuery={setQuery} onSearch={handleSearch} />\n      {showFilters && (\n        <Filters\n          filters={filters}\n          filterOptions={filterOptions}\n          setFilters={setFilters}\n          onApplyFilters={applyFilters}\n          onClearFilters={clearFilters}\n        />\n      )}\n      {notFound && <p className=\"notFound\">No se encontraron resultados para \"{query}\".</p>}\n      <ResultsGrid results={filteredResults} onResultClick={handleResultClick} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}